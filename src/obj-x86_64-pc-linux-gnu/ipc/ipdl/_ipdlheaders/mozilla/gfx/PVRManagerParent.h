//
// Automatically generated by ipdlc.
// Edit at your own risk
//

#ifndef PVRManagerParent_h
#define PVRManagerParent_h

#include "mozilla/gfx/PVRManager.h"
#ifdef DEBUG
#include "prenv.h"
#endif  // DEBUG

#include "mozilla/Tainting.h"
#include "mozilla/ipc/MessageChannel.h"
#include "mozilla/ipc/ProtocolUtils.h"
class nsIFile;

// Headers for things that cannot be forward declared
#include "moz_external_vr.h"
#include "mozilla/dom/GamepadHandle.h"
#include "mozilla/layers/CompositorTypes.h"
#include "mozilla/layers/LayersTypes.h"

namespace mozilla {
namespace gfx {
class PVRLayerParent;
} // namespace gfx
} // namespace mozilla
namespace mozilla {
namespace gfx {
class PVRLayerChild;
} // namespace gfx
} // namespace mozilla

namespace mozilla {
namespace gfx {
class PVRLayerParent;
} // namespace gfx
} // namespace mozilla

namespace mozilla {
namespace gfx {
struct VRFieldOfView;
} // namespace gfx
} // namespace mozilla

namespace mozilla {
namespace gfx {
struct VRDisplayInfo;
} // namespace gfx
} // namespace mozilla

namespace mozilla {
namespace gfx {
struct VRSensorUpdate;
} // namespace gfx
} // namespace mozilla

namespace mozilla {
namespace gfx {
struct VRHMDSensorState;
} // namespace gfx
} // namespace mozilla

namespace mozilla {
namespace gfx {
struct VRControllerInfo;
} // namespace gfx
} // namespace mozilla

namespace mozilla {
namespace gfx {
struct VRSubmitFrameResultInfo;
} // namespace gfx
} // namespace mozilla

namespace mozilla {
namespace gfx {


class PVRManagerParent :
    public mozilla::ipc::IToplevelProtocol
{
private:
    friend class mozilla::gfx::PVRLayerParent;
protected:
    typedef mozilla::ipc::ActorHandle ActorHandle;
    typedef mozilla::layers::Animatable Animatable;
    typedef mozilla::layers::Animation Animation;
    typedef mozilla::layers::AnimationSegment AnimationSegment;
    typedef mozilla::layers::AsyncParentMessageData AsyncParentMessageData;
    typedef mozilla::layers::BufferDescriptor BufferDescriptor;
    typedef mozilla::ipc::ByteBuf ByteBuf;
    typedef mozilla::CSSPoint CSSPoint;
    typedef mozilla::CSSRect CSSRect;
    typedef mozilla::layers::CanvasLayerAttributes CanvasLayerAttributes;
    typedef mozilla::gfx::ColorDepth ColorDepth;
    typedef mozilla::layers::ColorLayerAttributes ColorLayerAttributes;
    typedef mozilla::gfx::ColorRange ColorRange;
    typedef mozilla::layers::CommonLayerAttributes CommonLayerAttributes;
    typedef mozilla::layers::CompositableHandle CompositableHandle;
    typedef mozilla::layers::CompositableOperation CompositableOperation;
    typedef mozilla::layers::CompositableOperationDetail CompositableOperationDetail;
    typedef mozilla::layers::CompositionPayload CompositionPayload;
    typedef mozilla::layers::CompositorAnimations CompositorAnimations;
    typedef mozilla::layers::ContainerLayerAttributes ContainerLayerAttributes;
    typedef mozilla::layers::CrossProcessSemaphoreDescriptor CrossProcessSemaphoreDescriptor;
    typedef mozilla::CrossProcessSemaphoreHandle CrossProcessSemaphoreHandle;
    typedef mozilla::layers::CubicBezierFunction CubicBezierFunction;
    typedef mozilla::gfx::DeviceColor DeviceColor;
    typedef mozilla::layers::DiagnosticTypes DiagnosticTypes;
    typedef mozilla::layers::EGLImageDescriptor EGLImageDescriptor;
    typedef mozilla::layers::Edit Edit;
    template<class FooSide> using Endpoint = mozilla::ipc::Endpoint<FooSide>;
    typedef mozilla::layers::EventRegions EventRegions;
    typedef mozilla::layers::EventRegionsOverride EventRegionsOverride;
    typedef mozilla::ipc::FileDescriptor FileDescriptor;
    typedef mozilla::layers::FocusTarget FocusTarget;
    typedef mozilla::dom::GamepadAdded GamepadAdded;
    typedef mozilla::dom::GamepadAxisInformation GamepadAxisInformation;
    typedef mozilla::dom::GamepadButtonInformation GamepadButtonInformation;
    typedef mozilla::dom::GamepadChangeEvent GamepadChangeEvent;
    typedef mozilla::dom::GamepadChangeEventBody GamepadChangeEventBody;
    typedef mozilla::dom::GamepadHand GamepadHand;
    typedef mozilla::dom::GamepadHandInformation GamepadHandInformation;
    typedef mozilla::dom::GamepadHandle GamepadHandle;
    typedef mozilla::dom::GamepadLightIndicatorType GamepadLightIndicatorType;
    typedef mozilla::dom::GamepadLightIndicatorTypeInformation GamepadLightIndicatorTypeInformation;
    typedef mozilla::dom::GamepadMappingType GamepadMappingType;
    typedef mozilla::dom::GamepadPoseInformation GamepadPoseInformation;
    typedef mozilla::dom::GamepadPoseState GamepadPoseState;
    typedef mozilla::dom::GamepadRemoved GamepadRemoved;
    typedef mozilla::dom::GamepadTouchInformation GamepadTouchInformation;
    typedef mozilla::dom::GamepadTouchState GamepadTouchState;
    typedef mozilla::gfx::Glyph Glyph;
    typedef mozilla::ipc::SharedMemoryBasic::Handle Handle;
    typedef mozilla::layers::ImageCompositeNotification ImageCompositeNotification;
    typedef mozilla::layers::ImageLayerAttributes ImageLayerAttributes;
    typedef mozilla::gfx::IntPoint IntPoint;
    typedef mozilla::gfx::IntRect IntRect;
    typedef mozilla::gfx::IntSize IntSize;
    typedef mozilla::layers::LayerAttributes LayerAttributes;
    typedef mozilla::layers::LayerColor LayerColor;
    typedef mozilla::LayerCoord LayerCoord;
    typedef mozilla::layers::LayerHandle LayerHandle;
    typedef mozilla::LayerIntRect LayerIntRect;
    typedef mozilla::LayerIntRegion LayerIntRegion;
    typedef mozilla::LayerIntSize LayerIntSize;
    typedef mozilla::LayerMargin LayerMargin;
    typedef mozilla::LayerPoint LayerPoint;
    typedef mozilla::LayerRect LayerRect;
    typedef mozilla::LayerSize LayerSize;
    typedef mozilla::layers::LayersBackend LayersBackend;
    typedef mozilla::layers::LayersId LayersId;
    typedef mozilla::LayoutDeviceIntRect LayoutDeviceIntRect;
    typedef mozilla::LayoutDevicePoint LayoutDevicePoint;
    typedef mozilla::LayoutDeviceRect LayoutDeviceRect;
    typedef mozilla::LengthPercentage LengthPercentage;
    template<class FooSide> using ManagedEndpoint = mozilla::ipc::ManagedEndpoint<FooSide>;
    typedef mozilla::gfx::Matrix4x4 Matrix4x4;
    typedef mozilla::layers::MaybeVideoBridgeSource MaybeVideoBridgeSource;
    typedef mozilla::layers::MemoryOrShmem MemoryOrShmem;
    typedef mozilla::layers::MotionPathData MotionPathData;
    typedef mozilla::layers::OMTAValue OMTAValue;
    typedef mozilla::layers::OpAttachAsyncCompositable OpAttachAsyncCompositable;
    typedef mozilla::layers::OpAttachCompositable OpAttachCompositable;
    typedef mozilla::layers::OpContentBufferSwap OpContentBufferSwap;
    typedef mozilla::layers::OpCreateCanvasLayer OpCreateCanvasLayer;
    typedef mozilla::layers::OpCreateColorLayer OpCreateColorLayer;
    typedef mozilla::layers::OpCreateContainerLayer OpCreateContainerLayer;
    typedef mozilla::layers::OpCreateImageLayer OpCreateImageLayer;
    typedef mozilla::layers::OpCreatePaintedLayer OpCreatePaintedLayer;
    typedef mozilla::layers::OpCreateRefLayer OpCreateRefLayer;
    typedef mozilla::layers::OpDeliverAcquireFence OpDeliverAcquireFence;
    typedef mozilla::layers::OpDeliverReleaseFence OpDeliverReleaseFence;
    typedef mozilla::layers::OpDestroy OpDestroy;
    typedef mozilla::layers::OpInsertAfter OpInsertAfter;
    typedef mozilla::layers::OpNotifyNotUsed OpNotifyNotUsed;
    typedef mozilla::layers::OpPaintTextureRegion OpPaintTextureRegion;
    typedef mozilla::layers::OpPrependChild OpPrependChild;
    typedef mozilla::layers::OpRaiseToTopChild OpRaiseToTopChild;
    typedef mozilla::layers::OpRemoveChild OpRemoveChild;
    typedef mozilla::layers::OpRemoveTexture OpRemoveTexture;
    typedef mozilla::layers::OpRepositionChild OpRepositionChild;
    typedef mozilla::layers::OpSetDiagnosticTypes OpSetDiagnosticTypes;
    typedef mozilla::layers::OpSetLayerAttributes OpSetLayerAttributes;
    typedef mozilla::layers::OpSetRoot OpSetRoot;
    typedef mozilla::layers::OpSetSimpleLayerAttributes OpSetSimpleLayerAttributes;
    typedef mozilla::layers::OpUseComponentAlphaTextures OpUseComponentAlphaTextures;
    typedef mozilla::layers::OpUseTexture OpUseTexture;
    typedef mozilla::layers::OpUseTiledLayerBuffer OpUseTiledLayerBuffer;
    typedef mozilla::layers::PaintTiming PaintTiming;
    typedef mozilla::layers::PaintedLayerAttributes PaintedLayerAttributes;
    typedef mozilla::ParentLayerIntRect ParentLayerIntRect;
    typedef mozilla::ParentLayerRect ParentLayerRect;
    typedef mozilla::layers::PartialPrerenderData PartialPrerenderData;
    typedef mozilla::layers::PlaceholderTileDescriptor PlaceholderTileDescriptor;
    typedef mozilla::layers::PluginWindowData PluginWindowData;
    typedef mozilla::gfx::Point Point;
    typedef mozilla::gfx::Point3D Point3D;
    typedef base::ProcessId ProcessId;
    typedef mozilla::ipc::ProtocolId ProtocolId;
    typedef mozilla::layers::RGBDescriptor RGBDescriptor;
    typedef mozilla::RayReferenceData RayReferenceData;
    typedef mozilla::layers::ReadLockDescriptor ReadLockDescriptor;
    typedef mozilla::layers::RefLayerAttributes RefLayerAttributes;
    typedef mozilla::layers::RemoteDecoderVideoSubDescriptor RemoteDecoderVideoSubDescriptor;
    typedef mozilla::ipc::ResponseRejectReason ResponseRejectReason;
    typedef mozilla::gfx::SamplingFilter SamplingFilter;
    typedef mozilla::layers::ScaleMode ScaleMode;
    typedef hal::ScreenOrientation ScreenOrientation;
    typedef mozilla::ScreenRotation ScreenRotation;
    typedef mozilla::layers::ScrollMetadata ScrollMetadata;
    typedef mozilla::ipc::Shmem Shmem;
    typedef mozilla::layers::ShmemSection ShmemSection;
    typedef mozilla::SideBits SideBits;
    typedef mozilla::layers::SimpleLayerAttributes SimpleLayerAttributes;
    typedef mozilla::layers::SpecificLayerAttributes SpecificLayerAttributes;
    typedef mozilla::layers::StepFunction StepFunction;
    typedef mozilla::StereoMode StereoMode;
    typedef mozilla::StyleOffsetPath StyleOffsetPath;
    typedef mozilla::StyleOffsetRotate StyleOffsetRotate;
    typedef mozilla::StylePositionOrAuto StylePositionOrAuto;
    typedef mozilla::StyleRotate StyleRotate;
    typedef mozilla::StyleScale StyleScale;
    typedef mozilla::StyleTransform StyleTransform;
    typedef mozilla::StyleTranslate StyleTranslate;
    typedef mozilla::layers::SurfaceDescriptor SurfaceDescriptor;
    typedef mozilla::layers::SurfaceDescriptorAndroidHardwareBuffer SurfaceDescriptorAndroidHardwareBuffer;
    typedef mozilla::layers::SurfaceDescriptorBuffer SurfaceDescriptorBuffer;
    typedef mozilla::layers::SurfaceDescriptorD3D10 SurfaceDescriptorD3D10;
    typedef mozilla::layers::SurfaceDescriptorDIB SurfaceDescriptorDIB;
    typedef mozilla::layers::SurfaceDescriptorDMABuf SurfaceDescriptorDMABuf;
    typedef mozilla::layers::SurfaceDescriptorDXGIYCbCr SurfaceDescriptorDXGIYCbCr;
    typedef mozilla::layers::SurfaceDescriptorFileMapping SurfaceDescriptorFileMapping;
    typedef mozilla::layers::SurfaceDescriptorGPUVideo SurfaceDescriptorGPUVideo;
    typedef mozilla::layers::SurfaceDescriptorMacIOSurface SurfaceDescriptorMacIOSurface;
    typedef mozilla::layers::SurfaceDescriptorPlugin SurfaceDescriptorPlugin;
    typedef mozilla::layers::SurfaceDescriptorRecorded SurfaceDescriptorRecorded;
    typedef mozilla::layers::SurfaceDescriptorRemoteDecoder SurfaceDescriptorRemoteDecoder;
    typedef mozilla::layers::SurfaceDescriptorShared SurfaceDescriptorShared;
    typedef mozilla::layers::SurfaceDescriptorSharedGLTexture SurfaceDescriptorSharedGLTexture;
    typedef mozilla::layers::SurfaceDescriptorTiles SurfaceDescriptorTiles;
    typedef mozilla::layers::SurfaceDescriptorX11 SurfaceDescriptorX11;
    typedef mozilla::gfx::SurfaceFormat SurfaceFormat;
    typedef mozilla::layers::SurfaceTextureDescriptor SurfaceTextureDescriptor;
    typedef mozilla::layers::TargetConfig TargetConfig;
    typedef mozilla::layers::TextureFlags TextureFlags;
    typedef mozilla::layers::TextureInfo TextureInfo;
    typedef mozilla::layers::TexturedTileDescriptor TexturedTileDescriptor;
    typedef mozilla::layers::ThebesBufferData ThebesBufferData;
    typedef mozilla::layers::TileDescriptor TileDescriptor;
    typedef mozilla::TimeDuration TimeDuration;
    typedef mozilla::TimeStamp TimeStamp;
    typedef mozilla::layers::TimedTexture TimedTexture;
    typedef mozilla::layers::TimingFunction TimingFunction;
    typedef mozilla::layers::TransactionId TransactionId;
    typedef mozilla::layers::TransactionInfo TransactionInfo;
    typedef mozilla::layers::TransformData TransformData;
    typedef mozilla::ipc::Transport Transport;
    typedef mozilla::ipc::TransportDescriptor TransportDescriptor;
    template<class T> using UniquePtr = mozilla::UniquePtr<T>;
    typedef mozilla::gfx::VRControllerInfo VRControllerInfo;
    typedef mozilla::gfx::VRDisplayCapabilityFlags VRDisplayCapabilityFlags;
    typedef mozilla::gfx::VRDisplayInfo VRDisplayInfo;
    typedef mozilla::gfx::VRFieldOfView VRFieldOfView;
    typedef mozilla::gfx::VRHMDSensorState VRHMDSensorState;
    typedef mozilla::gfx::VRSensorUpdate VRSensorUpdate;
    typedef mozilla::gfx::VRSubmitFrameResultInfo VRSubmitFrameResultInfo;
    typedef mozilla::layers::ScrollableLayerGuid::ViewID ViewID;
    typedef mozilla::VsyncId VsyncId;
    typedef mozilla::WindowsHandle WindowsHandle;
    typedef mozilla::layers::YCbCrDescriptor YCbCrDescriptor;
    typedef mozilla::gfx::YUVColorSpace YUVColorSpace;
    typedef mozilla::null_t null_t;
    typedef mozilla::void_t void_t;
    typedef mozilla::gfx::PVRLayerParent PVRLayerParent;
    typedef mozilla::gfx::PVRLayerChild PVRLayerChild;

protected:
    virtual mozilla::ipc::IPCResult
    RecvPVRLayerConstructor(
            PVRLayerParent* actor,
            const uint32_t& aDisplayID,
            const uint32_t& aGroup);
    void
    ProcessingError(
            Result aCode,
            const char* aReason) override;
    bool
    ShouldContinueFromReplyTimeout() override;
    void
    EnteredCxxStack() override;
    void
    ExitedCxxStack() override;
    void
    EnteredCall() override;
    void
    ExitedCall() override;

public:
    typedef mozilla::ipc::IProtocol IProtocol;
    typedef IPC::Message Message;
    typedef base::ProcessHandle ProcessHandle;
    typedef mozilla::ipc::MessageChannel MessageChannel;
    typedef mozilla::ipc::SharedMemory SharedMemory;

public:
    MOZ_IMPLICIT PVRManagerParent();

    virtual ~PVRManagerParent();

public:
    void
    ManagedPVRLayerParent(nsTArray<PVRLayerParent*>& aArr) const;
    const ManagedContainer<PVRLayerParent>&
    ManagedPVRLayerParent() const;

    void
    AllManagedActors(nsTArray<RefPtr<mozilla::ipc::ActorLifecycleProxy>>& arr__) const override;

    ManagedEndpoint<PVRLayerChild>
    OpenPVRLayerEndpoint(PVRLayerParent* aActor);
    bool
    BindPVRLayerEndpoint(
            ManagedEndpoint<PVRLayerParent> aEndpoint,
            PVRLayerParent* aActor);

    [[nodiscard]] bool
    SendUpdateDisplayInfo(const VRDisplayInfo& aDisplayInfo);

    [[nodiscard]] bool
    SendUpdateRuntimeCapabilities(const VRDisplayCapabilityFlags& aCapabilities);

    [[nodiscard]] bool
    SendReplyGamepadVibrateHaptic(const uint32_t& aPromiseID);

    [[nodiscard]] bool
    SendNotifyPuppetCommandBufferCompleted(const bool& aSuccess);

    [[nodiscard]] bool
    SendNotifyPuppetResetComplete();

    void
    RemoveManagee(
            int32_t aProtocolId,
            IProtocol* aListener) override;
    void
    DeallocManagee(
            int32_t aProtocolId,
            IProtocol* aListener) override;

    Result
    OnMessageReceived(const Message& msg__) override;

    Result
    OnMessageReceived(
            const Message& msg__,
            Message*& reply__) override;

    Result
    OnCallReceived(
            const Message& msg__,
            Message*& reply__) override;

    void
    OnChannelClose() override;

    void
    OnChannelError() override;

private:
    void
    ClearSubtree();

    ManagedContainer<PVRLayerParent> mManagedPVRLayerParent;
};


} // namespace gfx
} // namespace mozilla
namespace mozilla {
namespace ipc {
template<>
struct IPDLParamTraits <mozilla::gfx::PVRManagerParent*>
{
    typedef mozilla::gfx::PVRManagerParent* paramType;
    static void
    Write(
            IPC::Message* aMsg,
            mozilla::ipc::IProtocol* aActor,
            const paramType& aVar);
    static bool
    Read(
            const IPC::Message* aMsg,
            PickleIterator* aIter,
            mozilla::ipc::IProtocol* aActor,
            paramType* aVar);
};
} // namespace ipc
} // namespace mozilla

#endif // ifndef PVRManagerParent_h
