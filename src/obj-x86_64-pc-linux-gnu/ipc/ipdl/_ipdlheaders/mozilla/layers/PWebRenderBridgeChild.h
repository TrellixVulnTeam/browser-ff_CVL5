//
// Automatically generated by ipdlc.
// Edit at your own risk
//

#ifndef PWebRenderBridgeChild_h
#define PWebRenderBridgeChild_h

#include "mozilla/layers/PWebRenderBridge.h"
#ifdef DEBUG
#include "prenv.h"
#endif  // DEBUG

#include "mozilla/Tainting.h"
#include "mozilla/ipc/MessageChannel.h"
#include "mozilla/ipc/ProtocolUtils.h"
// Headers for things that cannot be forward declared
#include "mozilla/VsyncDispatcher.h"
#include "mozilla/layers/APZTestData.h"
#include "mozilla/layers/FocusTarget.h"
#include "mozilla/layers/FrameUniformityData.h"
#include "mozilla/layers/LayersTypes.h"
#include "mozilla/layers/RenderRootTypes.h"
#include "mozilla/layers/ScrollableLayerGuid.h"
#include "mozilla/webrender/WebRenderTypes.h"
#include "mozilla/webrender/webrender_ffi.h"

namespace mozilla {
namespace layers {
class PCompositorBridgeChild;
} // namespace layers
} // namespace mozilla
namespace mozilla {
namespace layers {
class PCompositorBridgeParent;
} // namespace layers
} // namespace mozilla

namespace mozilla {
namespace layers {
class PTextureChild;
} // namespace layers
} // namespace mozilla
namespace mozilla {
namespace layers {
class PTextureParent;
} // namespace layers
} // namespace mozilla

namespace mozilla {
namespace layers {
class PCompositorBridgeChild;
} // namespace layers
} // namespace mozilla

namespace mozilla {
namespace layers {
struct TextureFactoryIdentifier;
} // namespace layers
} // namespace mozilla

namespace mozilla {
namespace layers {
struct TextureInfo;
} // namespace layers
} // namespace mozilla

namespace mozilla {
namespace layers {


class PWebRenderBridgeChild :
    public mozilla::ipc::IProtocol
{
private:
    friend class mozilla::layers::PCompositorBridgeChild;
protected:
    typedef mozilla::layers::APZTestData APZTestData;
    typedef mozilla::ipc::ActorHandle ActorHandle;
    typedef mozilla::layers::Animatable Animatable;
    typedef mozilla::layers::Animation Animation;
    typedef mozilla::layers::AnimationSegment AnimationSegment;
    typedef mozilla::layers::AsyncParentMessageData AsyncParentMessageData;
    typedef mozilla::wr::BlobImageKey BlobImageKey;
    typedef mozilla::layers::BufferDescriptor BufferDescriptor;
    typedef mozilla::wr::BuiltDisplayListDescriptor BuiltDisplayListDescriptor;
    typedef mozilla::ipc::ByteBuf ByteBuf;
    typedef mozilla::CSSPoint CSSPoint;
    typedef mozilla::CSSRect CSSRect;
    typedef mozilla::layers::CanvasLayerAttributes CanvasLayerAttributes;
    typedef mozilla::gfx::ColorDepth ColorDepth;
    typedef mozilla::layers::ColorLayerAttributes ColorLayerAttributes;
    typedef mozilla::gfx::ColorRange ColorRange;
    typedef mozilla::layers::CommonLayerAttributes CommonLayerAttributes;
    typedef mozilla::layers::CompositableHandle CompositableHandle;
    typedef mozilla::layers::CompositableOperation CompositableOperation;
    typedef mozilla::layers::CompositableOperationDetail CompositableOperationDetail;
    typedef mozilla::layers::CompositionPayload CompositionPayload;
    typedef mozilla::layers::CompositorAnimations CompositorAnimations;
    typedef mozilla::layers::ContainerLayerAttributes ContainerLayerAttributes;
    typedef mozilla::layers::CrossProcessSemaphoreDescriptor CrossProcessSemaphoreDescriptor;
    typedef mozilla::CrossProcessSemaphoreHandle CrossProcessSemaphoreHandle;
    typedef mozilla::layers::CubicBezierFunction CubicBezierFunction;
    typedef mozilla::gfx::DeviceColor DeviceColor;
    typedef mozilla::layers::DiagnosticTypes DiagnosticTypes;
    typedef mozilla::layers::DisplayListData DisplayListData;
    typedef mozilla::layers::EGLImageDescriptor EGLImageDescriptor;
    typedef mozilla::layers::Edit Edit;
    template<class FooSide> using Endpoint = mozilla::ipc::Endpoint<FooSide>;
    typedef mozilla::layers::EventRegions EventRegions;
    typedef mozilla::layers::EventRegionsOverride EventRegionsOverride;
    typedef mozilla::wr::ExternalImageId ExternalImageId;
    typedef mozilla::wr::ExternalImageKeyPair ExternalImageKeyPair;
    typedef mozilla::ipc::FileDescriptor FileDescriptor;
    typedef mozilla::layers::FocusTarget FocusTarget;
    typedef mozilla::wr::FontInstanceKey FontInstanceKey;
    typedef mozilla::wr::FontKey FontKey;
    typedef mozilla::layers::FrameUniformityData FrameUniformityData;
    typedef mozilla::gfx::Glyph Glyph;
    typedef mozilla::ipc::SharedMemoryBasic::Handle Handle;
    typedef mozilla::wr::IdNamespace IdNamespace;
    typedef mozilla::layers::ImageCompositeNotification ImageCompositeNotification;
    typedef mozilla::wr::ImageDescriptor ImageDescriptor;
    typedef mozilla::ImageIntRect ImageIntRect;
    typedef mozilla::wr::ImageKey ImageKey;
    typedef mozilla::layers::ImageLayerAttributes ImageLayerAttributes;
    typedef mozilla::wr::ImageRendering ImageRendering;
    typedef mozilla::gfx::IntPoint IntPoint;
    typedef mozilla::gfx::IntRect IntRect;
    typedef mozilla::gfx::IntSize IntSize;
    typedef mozilla::layers::LayerAttributes LayerAttributes;
    typedef mozilla::layers::LayerColor LayerColor;
    typedef mozilla::LayerCoord LayerCoord;
    typedef mozilla::layers::LayerHandle LayerHandle;
    typedef mozilla::LayerIntRect LayerIntRect;
    typedef mozilla::LayerIntRegion LayerIntRegion;
    typedef mozilla::LayerIntSize LayerIntSize;
    typedef mozilla::LayerMargin LayerMargin;
    typedef mozilla::LayerPoint LayerPoint;
    typedef mozilla::LayerRect LayerRect;
    typedef mozilla::LayerSize LayerSize;
    typedef mozilla::layers::LayersBackend LayersBackend;
    typedef mozilla::layers::LayersId LayersId;
    typedef mozilla::layers::LayersObserverEpoch LayersObserverEpoch;
    typedef mozilla::LayoutDeviceIntRect LayoutDeviceIntRect;
    typedef mozilla::LayoutDevicePoint LayoutDevicePoint;
    typedef mozilla::LayoutDeviceRect LayoutDeviceRect;
    typedef mozilla::LayoutDeviceSize LayoutDeviceSize;
    typedef mozilla::wr::LayoutSize LayoutSize;
    typedef mozilla::LengthPercentage LengthPercentage;
    template<class FooSide> using ManagedEndpoint = mozilla::ipc::ManagedEndpoint<FooSide>;
    typedef mozilla::gfx::Matrix4x4 Matrix4x4;
    typedef mozilla::wr::MaybeFontInstanceOptions MaybeFontInstanceOptions;
    typedef mozilla::wr::MaybeFontInstancePlatformOptions MaybeFontInstancePlatformOptions;
    typedef mozilla::wr::MaybeIdNamespace MaybeIdNamespace;
    typedef mozilla::gfx::MaybeIntSize MaybeIntSize;
    typedef mozilla::layers::MaybeTransactionData MaybeTransactionData;
    typedef mozilla::layers::MaybeVideoBridgeSource MaybeVideoBridgeSource;
    typedef mozilla::layers::MemoryOrShmem MemoryOrShmem;
    typedef mozilla::wr::MixBlendMode MixBlendMode;
    typedef mozilla::layers::MotionPathData MotionPathData;
    typedef mozilla::layers::OMTAValue OMTAValue;
    typedef mozilla::layers::OffsetRange OffsetRange;
    typedef mozilla::layers::OpAddBlobImage OpAddBlobImage;
    typedef mozilla::layers::OpAddCompositorAnimations OpAddCompositorAnimations;
    typedef mozilla::layers::OpAddFontDescriptor OpAddFontDescriptor;
    typedef mozilla::layers::OpAddFontInstance OpAddFontInstance;
    typedef mozilla::layers::OpAddImage OpAddImage;
    typedef mozilla::layers::OpAddPipelineIdForCompositable OpAddPipelineIdForCompositable;
    typedef mozilla::layers::OpAddPrivateExternalImage OpAddPrivateExternalImage;
    typedef mozilla::layers::OpAddRawFont OpAddRawFont;
    typedef mozilla::layers::OpAddSharedExternalImage OpAddSharedExternalImage;
    typedef mozilla::layers::OpAttachAsyncCompositable OpAttachAsyncCompositable;
    typedef mozilla::layers::OpAttachCompositable OpAttachCompositable;
    typedef mozilla::layers::OpContentBufferSwap OpContentBufferSwap;
    typedef mozilla::layers::OpCreateCanvasLayer OpCreateCanvasLayer;
    typedef mozilla::layers::OpCreateColorLayer OpCreateColorLayer;
    typedef mozilla::layers::OpCreateContainerLayer OpCreateContainerLayer;
    typedef mozilla::layers::OpCreateImageLayer OpCreateImageLayer;
    typedef mozilla::layers::OpCreatePaintedLayer OpCreatePaintedLayer;
    typedef mozilla::layers::OpCreateRefLayer OpCreateRefLayer;
    typedef mozilla::layers::OpDeleteBlobImage OpDeleteBlobImage;
    typedef mozilla::layers::OpDeleteFont OpDeleteFont;
    typedef mozilla::layers::OpDeleteFontInstance OpDeleteFontInstance;
    typedef mozilla::layers::OpDeleteImage OpDeleteImage;
    typedef mozilla::layers::OpDeliverAcquireFence OpDeliverAcquireFence;
    typedef mozilla::layers::OpDeliverReleaseFence OpDeliverReleaseFence;
    typedef mozilla::layers::OpDestroy OpDestroy;
    typedef mozilla::layers::OpInsertAfter OpInsertAfter;
    typedef mozilla::layers::OpNotifyNotUsed OpNotifyNotUsed;
    typedef mozilla::layers::OpPaintTextureRegion OpPaintTextureRegion;
    typedef mozilla::layers::OpPrependChild OpPrependChild;
    typedef mozilla::layers::OpPushExternalImageForTexture OpPushExternalImageForTexture;
    typedef mozilla::layers::OpRaiseToTopChild OpRaiseToTopChild;
    typedef mozilla::layers::OpReleaseTextureOfImage OpReleaseTextureOfImage;
    typedef mozilla::layers::OpRemoveChild OpRemoveChild;
    typedef mozilla::layers::OpRemovePipelineIdForCompositable OpRemovePipelineIdForCompositable;
    typedef mozilla::layers::OpRemoveTexture OpRemoveTexture;
    typedef mozilla::layers::OpRepositionChild OpRepositionChild;
    typedef mozilla::layers::OpSetBlobImageVisibleArea OpSetBlobImageVisibleArea;
    typedef mozilla::layers::OpSetDiagnosticTypes OpSetDiagnosticTypes;
    typedef mozilla::layers::OpSetLayerAttributes OpSetLayerAttributes;
    typedef mozilla::layers::OpSetRoot OpSetRoot;
    typedef mozilla::layers::OpSetSimpleLayerAttributes OpSetSimpleLayerAttributes;
    typedef mozilla::layers::OpUpdateAsyncImagePipeline OpUpdateAsyncImagePipeline;
    typedef mozilla::layers::OpUpdateBlobImage OpUpdateBlobImage;
    typedef mozilla::layers::OpUpdateImage OpUpdateImage;
    typedef mozilla::layers::OpUpdatePrivateExternalImage OpUpdatePrivateExternalImage;
    typedef mozilla::layers::OpUpdateResource OpUpdateResource;
    typedef mozilla::layers::OpUpdateSharedExternalImage OpUpdateSharedExternalImage;
    typedef mozilla::layers::OpUpdatedAsyncImagePipeline OpUpdatedAsyncImagePipeline;
    typedef mozilla::layers::OpUseComponentAlphaTextures OpUseComponentAlphaTextures;
    typedef mozilla::layers::OpUseTexture OpUseTexture;
    typedef mozilla::layers::OpUseTiledLayerBuffer OpUseTiledLayerBuffer;
    typedef mozilla::layers::PaintTiming PaintTiming;
    typedef mozilla::layers::PaintedLayerAttributes PaintedLayerAttributes;
    typedef mozilla::ParentLayerIntRect ParentLayerIntRect;
    typedef mozilla::ParentLayerRect ParentLayerRect;
    typedef mozilla::layers::PartialPrerenderData PartialPrerenderData;
    typedef mozilla::wr::PipelineId PipelineId;
    typedef mozilla::layers::PlaceholderTileDescriptor PlaceholderTileDescriptor;
    typedef mozilla::layers::PluginWindowData PluginWindowData;
    typedef mozilla::gfx::Point Point;
    typedef mozilla::gfx::Point3D Point3D;
    typedef base::ProcessId ProcessId;
    typedef mozilla::ipc::ProtocolId ProtocolId;
    typedef mozilla::layers::RGBDescriptor RGBDescriptor;
    typedef mozilla::RayReferenceData RayReferenceData;
    typedef mozilla::layers::ReadLockDescriptor ReadLockDescriptor;
    typedef mozilla::gfx::Rect Rect;
    typedef mozilla::layers::RefCountedShmem RefCountedShmem;
    typedef mozilla::layers::RefLayerAttributes RefLayerAttributes;
    typedef mozilla::layers::RemoteDecoderVideoSubDescriptor RemoteDecoderVideoSubDescriptor;
    typedef mozilla::ipc::ResponseRejectReason ResponseRejectReason;
    typedef mozilla::VideoInfo::Rotation Rotation;
    typedef mozilla::gfx::SamplingFilter SamplingFilter;
    typedef mozilla::layers::ScaleMode ScaleMode;
    typedef hal::ScreenOrientation ScreenOrientation;
    typedef mozilla::ScreenRotation ScreenRotation;
    typedef mozilla::layers::ScrollMetadata ScrollMetadata;
    typedef mozilla::layers::ScrollableLayerGuid ScrollableLayerGuid;
    typedef mozilla::ipc::Shmem Shmem;
    typedef mozilla::layers::ShmemSection ShmemSection;
    typedef mozilla::SideBits SideBits;
    typedef mozilla::layers::SimpleLayerAttributes SimpleLayerAttributes;
    typedef mozilla::layers::SpecificLayerAttributes SpecificLayerAttributes;
    typedef mozilla::layers::StepFunction StepFunction;
    typedef mozilla::StereoMode StereoMode;
    typedef mozilla::StyleOffsetPath StyleOffsetPath;
    typedef mozilla::StyleOffsetRotate StyleOffsetRotate;
    typedef mozilla::StylePositionOrAuto StylePositionOrAuto;
    typedef mozilla::StyleRotate StyleRotate;
    typedef mozilla::StyleScale StyleScale;
    typedef mozilla::StyleTransform StyleTransform;
    typedef mozilla::StyleTranslate StyleTranslate;
    typedef mozilla::layers::SurfaceDescriptor SurfaceDescriptor;
    typedef mozilla::layers::SurfaceDescriptorAndroidHardwareBuffer SurfaceDescriptorAndroidHardwareBuffer;
    typedef mozilla::layers::SurfaceDescriptorBuffer SurfaceDescriptorBuffer;
    typedef mozilla::layers::SurfaceDescriptorD3D10 SurfaceDescriptorD3D10;
    typedef mozilla::layers::SurfaceDescriptorDIB SurfaceDescriptorDIB;
    typedef mozilla::layers::SurfaceDescriptorDMABuf SurfaceDescriptorDMABuf;
    typedef mozilla::layers::SurfaceDescriptorDXGIYCbCr SurfaceDescriptorDXGIYCbCr;
    typedef mozilla::layers::SurfaceDescriptorFileMapping SurfaceDescriptorFileMapping;
    typedef mozilla::layers::SurfaceDescriptorGPUVideo SurfaceDescriptorGPUVideo;
    typedef mozilla::layers::SurfaceDescriptorMacIOSurface SurfaceDescriptorMacIOSurface;
    typedef mozilla::layers::SurfaceDescriptorPlugin SurfaceDescriptorPlugin;
    typedef mozilla::layers::SurfaceDescriptorRecorded SurfaceDescriptorRecorded;
    typedef mozilla::layers::SurfaceDescriptorRemoteDecoder SurfaceDescriptorRemoteDecoder;
    typedef mozilla::layers::SurfaceDescriptorShared SurfaceDescriptorShared;
    typedef mozilla::layers::SurfaceDescriptorSharedGLTexture SurfaceDescriptorSharedGLTexture;
    typedef mozilla::layers::SurfaceDescriptorTiles SurfaceDescriptorTiles;
    typedef mozilla::layers::SurfaceDescriptorX11 SurfaceDescriptorX11;
    typedef mozilla::gfx::SurfaceFormat SurfaceFormat;
    typedef mozilla::layers::SurfaceTextureDescriptor SurfaceTextureDescriptor;
    typedef mozilla::layers::TargetConfig TargetConfig;
    typedef mozilla::layers::TextureFactoryIdentifier TextureFactoryIdentifier;
    typedef mozilla::layers::TextureInfo TextureInfo;
    typedef mozilla::layers::TexturedTileDescriptor TexturedTileDescriptor;
    typedef mozilla::layers::ThebesBufferData ThebesBufferData;
    typedef mozilla::layers::TileDescriptor TileDescriptor;
    typedef mozilla::TimeDuration TimeDuration;
    typedef mozilla::TimeStamp TimeStamp;
    typedef mozilla::layers::TimedTexture TimedTexture;
    typedef mozilla::layers::TimingFunction TimingFunction;
    typedef mozilla::layers::TransactionId TransactionId;
    typedef mozilla::layers::TransactionInfo TransactionInfo;
    typedef mozilla::layers::TransformData TransformData;
    typedef mozilla::ipc::Transport Transport;
    typedef mozilla::ipc::TransportDescriptor TransportDescriptor;
    template<class T> using UniquePtr = mozilla::UniquePtr<T>;
    typedef mozilla::layers::ScrollableLayerGuid::ViewID ViewID;
    typedef mozilla::VsyncId VsyncId;
    typedef mozilla::layers::WebRenderParentCommand WebRenderParentCommand;
    typedef mozilla::WindowsHandle WindowsHandle;
    typedef mozilla::layers::YCbCrDescriptor YCbCrDescriptor;
    typedef mozilla::gfx::YUVColorSpace YUVColorSpace;
    typedef mozilla::null_t null_t;
    typedef mozilla::void_t void_t;
    typedef mozilla::layers::PCompositorBridgeChild PCompositorBridgeChild;
    typedef mozilla::layers::PCompositorBridgeParent PCompositorBridgeParent;
    typedef mozilla::layers::PTextureChild PTextureChild;
    typedef mozilla::layers::PTextureParent PTextureParent;

protected:
    virtual mozilla::ipc::IPCResult
    Recv__delete__();
public:
    typedef mozilla::ipc::IProtocol IProtocol;
    typedef IPC::Message Message;
    typedef base::ProcessHandle ProcessHandle;
    typedef mozilla::ipc::MessageChannel MessageChannel;
    typedef mozilla::ipc::SharedMemory SharedMemory;

public:
    MOZ_IMPLICIT PWebRenderBridgeChild();

    virtual ~PWebRenderBridgeChild();

public:
    PCompositorBridgeChild*
    Manager() const;

    void
    AllManagedActors(nsTArray<RefPtr<mozilla::ipc::ActorLifecycleProxy>>& arr__) const override;

    bool
    SendEnsureConnected(
            TextureFactoryIdentifier* textureFactoryIdentifier,
            MaybeIdNamespace* maybeIdNamespace,
            nsCString* error);

    bool
    SendNewCompositable(
            const CompositableHandle& handle,
            const TextureInfo& info);

    bool
    SendReleaseCompositable(const CompositableHandle& compositable);

    bool
    SendDeleteCompositorAnimations(const nsTArray<uint64_t>& aIds);

    bool
    SendSetDisplayList(
            DisplayListData&& displayList,
            const nsTArray<OpDestroy>& toDestroy,
            const uint64_t& fwdTransactionId,
            const TransactionId& transactionId,
            const bool& containsSVGGroup,
            const VsyncId& vsyncId,
            const TimeStamp& vsyncStartTime,
            const TimeStamp& refreshStartTime,
            const TimeStamp& txnStartTime,
            const nsCString& txnURL,
            const TimeStamp& fwdTime,
            const nsTArray<CompositionPayload>& payloads);

    bool
    SendEmptyTransaction(
            const FocusTarget& focusTarget,
            MaybeTransactionData&& transationData,
            const nsTArray<OpDestroy>& toDestroy,
            const uint64_t& fwdTransactionId,
            const TransactionId& transactionId,
            const VsyncId& vsyncId,
            const TimeStamp& vsyncStartTime,
            const TimeStamp& refreshStartTime,
            const TimeStamp& txnStartTime,
            const nsCString& txnURL,
            const TimeStamp& fwdTime,
            const nsTArray<CompositionPayload>& payloads);

    bool
    SendSetFocusTarget(const FocusTarget& focusTarget);

    bool
    SendUpdateResources(
            const IdNamespace& aIdNamespace,
            const nsTArray<OpUpdateResource>& aResourceUpdates,
            const nsTArray<RefCountedShmem>& aSmallShmems,
            nsTArray<Shmem>&& aLargeShmems);

    bool
    SendParentCommands(const nsTArray<WebRenderParentCommand>& commands);

    bool
    SendGetSnapshot(
            PTextureChild* texture,
            bool* aNeedsYFlip);

    bool
    SendSetLayersObserverEpoch(const LayersObserverEpoch& childEpoch);

    bool
    SendClearCachedResources();

    bool
    SendInvalidateRenderedFrame();

    bool
    SendScheduleComposite();

    bool
    SendCapture();

    bool
    SendToggleCaptureSequence();

    bool
    SendSyncWithCompositor();

    bool
    SendSetConfirmedTargetAPZC(
            const uint64_t& aInputBlockId,
            const nsTArray<ScrollableLayerGuid>& aTargets);

    bool
    SendSetTestSampleTime(const TimeStamp& sampleTime);

    bool
    SendLeaveTestMode();

    bool
    SendGetAnimationValue(
            const uint64_t& aCompositorAnimationsId,
            OMTAValue* value);

    bool
    SendSetAsyncScrollOffset(
            const ViewID& scrollId,
            const float& x,
            const float& y);

    bool
    SendSetAsyncZoom(
            const ViewID& scrollId,
            const float& zoom);

    bool
    SendFlushApzRepaints();

    bool
    SendGetAPZTestData(APZTestData* data);

    bool
    SendGetFrameUniformity(FrameUniformityData* data);

    bool
    SendShutdown();

    bool
    SendShutdownSync();

    void
    RemoveManagee(
            int32_t aProtocolId,
            IProtocol* aListener) override;
    void
    DeallocManagee(
            int32_t aProtocolId,
            IProtocol* aListener) override;

    Result
    OnMessageReceived(const Message& msg__) override;

    Result
    OnMessageReceived(
            const Message& msg__,
            Message*& reply__) override;

    Result
    OnCallReceived(
            const Message& msg__,
            Message*& reply__) override;

private:
    void
    ClearSubtree();

};


} // namespace layers
} // namespace mozilla
namespace mozilla {
namespace ipc {
template<>
struct IPDLParamTraits <mozilla::layers::PWebRenderBridgeChild*>
{
    typedef mozilla::layers::PWebRenderBridgeChild* paramType;
    static void
    Write(
            IPC::Message* aMsg,
            mozilla::ipc::IProtocol* aActor,
            const paramType& aVar);
    static bool
    Read(
            const IPC::Message* aMsg,
            PickleIterator* aIter,
            mozilla::ipc::IProtocol* aActor,
            paramType* aVar);
};
} // namespace ipc
} // namespace mozilla

#endif // ifndef PWebRenderBridgeChild_h
